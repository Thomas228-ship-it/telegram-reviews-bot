# Telegram Bot для отзывов

Telegram бот для управления отзывами с функционалом модерации.

## Особенности

- Пользователи могут оставлять отзывы с рейтингом от 1 до 5 звезд
- Поддержка прикрепления файлов (фото, видео, документы, голосовые сообщения)
- Админ-панель для модерации отзывов
- Публикация одобренных отзывов для всех пользователей

## Развертывание на Railway

### Метод 1: Через Railway CLI

1. Установите Railway CLI:
   ```bash
   npm install -g @railway/cli
   ```

2. Войдите в Railway:
   ```bash
   railway login
   ```

3. Инициализируйте проект:
   ```bash
   railway init
   ```

4. Добавьте переменные окружения:
   ```bash
   railway variables set BOT_TOKEN="ваш_токен_бота"
   railway variables set ADMIN_IDS="8446467322,6555503209"
   ```

5. Разверните проект:
   ```bash
   railway up
   ```

### Метод 2: Через веб-интерфейс Railway

1. Перейдите на [railway.app](https://railway.app) и войдите в аккаунт

2. Нажмите "New Project" → "Deploy from GitHub repo"

3. Подключите ваш GitHub репозиторий

4. Railway автоматически обнаружит проект и начнет развертывание

5. В настройках проекта (Settings → Variables) добавьте переменные окружения:
   - `BOT_TOKEN` - токен вашего Telegram бота (получите у @BotFather)
   - `ADMIN_IDS` - список ID администраторов через запятую (например: "8446467322,6555503209")

6. После деплоя бот автоматически запустится

## Получение токена бота

1. Откройте [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен

## Получение ID администраторов

1. Найдите @userinfobot в Telegram
2. Начните с ним диалог
3. Скопируйте ваш ID
4. Добавьте его в переменную `ADMIN_IDS`

## Локальный запуск

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Создайте файл `.env`:
   ```
   BOT_TOKEN=ваш_токен_бота
   ADMIN_IDS=8446467322,6555503209
   ```

3. Запустите бота:
   ```bash
   python main.py
   ```

## Структура базы данных

Таблица `reviews`:
- `id` - ID отзыва
- `user_id` - ID пользователя
- `username` - Имя пользователя
- `rating` - Оценка (1-5)
- `text` - Текст отзыва
- `attachments` - Вложения
- `status` - Статус (pending/approved/rejected)
- `admin_id` - ID администратора, который модерировал
- `moderation_date` - Дата модерации
- `created_at` - Дата создания

## Команды бота

- `/start` - Главное меню
- `/admin` - Админ-панель (только для администраторов)

